<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="theme-color" content="#242424"><title>iPad HTML Loader</title><link rel="preconnect" href="https://cdnjs.cloudflare.com"><script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js" defer></script><style>:root{--bg-body:#242424;--bg-sidebar:#1a1a1a;--bg-card:#2c2c2e;--bg-input:#1a1a1a;--text-primary:#ffffff;--text-secondary:#b0b0b0;--accent:#d1d1d1;--accent-text:#000000;--border:#333333;--radius-lg:18px;--radius-md:12px;--radius-sm:8px;--sidebar-width:280px;--header-height:54px;--font-stack:-apple-system,BlinkMacSystemFont,"SF Pro Text","Helvetica Neue",Helvetica,Arial,sans-serif;--preview-bg:#242424}body.theme-midnight{--bg-body:#000000;--bg-sidebar:#000000;--bg-card:#1c1c1e;--bg-input:#121212;--text-primary:#ffffff;--text-secondary:#8e8e93;--accent:#0a84ff;--accent-text:#ffffff;--border:#222;--preview-bg:#000000}body.theme-ocean{--bg-body:#0f172a;--bg-sidebar:#020617;--bg-card:#1e293b;--bg-input:#020617;--text-primary:#f1f5f9;--text-secondary:#94a3b8;--accent:#38bdf8;--accent-text:#0f172a;--border:#1e293b;--preview-bg:#0f172a}body.theme-solar{--bg-body:#f2f2f7;--bg-sidebar:#e5e5ea;--bg-card:#ffffff;--bg-input:#ffffff;--text-primary:#000000;--text-secondary:#8e8e93;--accent:#007aff;--accent-text:#ffffff;--border:#d1d1d6;--preview-bg:#f2f2f7}body.theme-retro{--bg-body:#0d0d0d;--bg-sidebar:#001100;--bg-card:#002200;--bg-input:#000000;--text-primary:#00ff00;--text-secondary:#008800;--accent:#00ff00;--accent-text:#000000;--border:#004400;--preview-bg:#0d0d0d}*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}body{margin:0;padding:0;font-family:var(--font-stack);background-color:var(--bg-body);color:var(--text-primary);height:100vh;width:100vw;overflow:hidden;display:flex;content-visibility:auto}#sidebar{width:var(--sidebar-width);background-color:var(--bg-sidebar);border-right:1px solid var(--border);display:flex;flex-direction:column;z-index:20;flex-shrink:0;will-change:transform}.sidebar-header{height:var(--header-height);display:flex;align-items:center;padding:0 20px;font-weight:700;font-size:18px;border-bottom:1px solid var(--border);letter-spacing:-0.01em;text-transform:uppercase;color:var(--text-secondary)}#favorites-list{flex:1;overflow-y:auto;padding:12px;scrollbar-width:none}#favorites-list::-webkit-scrollbar{display:none}.fav-wrapper{position:relative;margin-bottom:10px;overflow:hidden;border-radius:var(--radius-md);background:#ff3b30}.fav-item{position:relative;display:flex;align-items:center;padding:16px 20px;background:var(--bg-card);cursor:pointer;transition:transform 0.2s cubic-bezier(0.4,0,0.2,1);z-index:2}.delete-action{position:absolute;right:0;top:0;bottom:0;width:70px;display:flex;align-items:center;justify-content:center;color:white;z-index:1}.fav-name{font-weight:600;font-size:16px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}#workspace{flex:1;display:flex;flex-direction:column;background-color:var(--bg-body);position:relative;overflow:hidden}#top-bar{height:var(--header-height);display:flex;align-items:center;justify-content:space-between;padding:0 12px;border-bottom:1px solid var(--border);z-index:10}.toolbar-group{display:flex;gap:6px;align-items:center}.btn{background:var(--bg-card);color:var(--text-primary);border:1px solid var(--border);padding:0 12px;height:36px;border-radius:var(--radius-md);font-weight:600;display:flex;align-items:center;gap:5px;cursor:pointer;font-size:13px;transition:opacity 0.1s linear}.btn:active{opacity:0.7}.btn-primary{background:var(--accent);color:var(--accent-text);border:none}.btn-icon{width:36px;padding:0;justify-content:center;background:transparent;border:none}#preview-pane{flex:1;display:flex;flex-direction:column;position:relative;padding:0;overflow:hidden}#preview-wrapper{position:relative;flex:1;width:100%;height:100%;background:var(--preview-bg);overflow:hidden}#preview-wrapper.pseudo-fullscreen{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:9999}#preview-frame{width:100%;height:100%;border:none;background:transparent;display:block}.preview-controls{position:absolute;bottom:15px;left:50%;transform:translateX(-50%);display:flex;gap:8px;z-index:100;transition:opacity 0.2s}#preview-wrapper.pseudo-fullscreen .preview-controls{opacity:0;pointer-events:none}.control-btn{height:40px;padding:0 18px;border-radius:20px;background:rgba(0,0,0,0.6);color:white;border:none;font-weight:700;font-size:13px;cursor:pointer;backdrop-filter:blur(10px);display:flex;align-items:center;gap:5px}#corner-fullscreen-btn{position:absolute;top:12px;left:12px;width:32px;height:32px;border-radius:6px;background:rgba(0,0,0,0.3);color:white;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:101}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.4);z-index:10000;display:none;align-items:center;justify-content:center;backdrop-filter:blur(10px);contain:strict}.modal-overlay.active{display:flex}.modal{background:var(--bg-card);width:90%;max-width:420px;border-radius:var(--radius-lg);padding:20px;border:1px solid var(--border);box-shadow:0 20px 60px rgba(0,0,0,0.4)}.textarea-field{width:100%;height:220px;padding:12px;border-radius:var(--radius-md);border:1px solid var(--border);background:var(--bg-input);color:var(--text-primary);margin-bottom:12px;font-family:monospace;resize:none;font-size:13px}.input-field{width:100%;padding:10px;border-radius:var(--radius-md);border:1px solid var(--border);background:var(--bg-input);color:var(--text-primary);margin-bottom:12px}#theme-dropdown{position:absolute;top:40px;right:0;width:150px;background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius-md);padding:4px;display:none;flex-direction:column;z-index:50}#theme-dropdown.show{display:flex}.theme-option{padding:8px 10px;border-radius:6px;cursor:pointer;font-size:12px}svg{fill:currentColor;width:18px;height:18px;pointer-events:none}.sortable-ghost{opacity:0.4;background:var(--accent)!important}</style></head><body class="theme-gray"><aside id="sidebar"><div class="sidebar-header">Library</div><div id="favorites-list"></div></aside><main id="workspace"><header id="top-bar"><div class="toolbar-group"><button class="btn btn-icon" id="toggle-sidebar-btn" aria-label="Toggle Sidebar"><svg viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></button><div style="font-weight:700;font-size:15px;">HTML Loader</div></div><div class="toolbar-group"><button class="btn" onclick="openOptimizerModal()">Optimizer</button><button class="btn" onclick="document.getElementById('file-input').click()">Upload</button><button class="btn" onclick="openSaveModal()">Save</button><div style="position:relative;"><button class="btn btn-icon" id="settings-btn" aria-label="Settings"><svg viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg></button><div id="theme-dropdown"><div class="theme-option" onclick="setTheme('gray')">Gray</div><div class="theme-option" onclick="setTheme('midnight')">Midnight</div><div class="theme-option" onclick="setTheme('ocean')">Ocean</div><div class="theme-option" onclick="setTheme('solar')">Solar</div><div class="theme-option" onclick="setTheme('retro')">Retro</div></div></div></div></header><div id="preview-pane"><div id="preview-wrapper"><iframe id="preview-frame" src="about:blank" sandbox="allow-scripts allow-forms allow-modals allow-popups allow-presentation allow-same-origin"></iframe><button id="corner-fullscreen-btn" onclick="toggleFullscreen()" aria-label="Toggle Fullscreen"><svg id="fullscreen-icon" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg></button><div class="preview-controls"><button class="control-btn" onclick="openPasteModal()">Paste HTML</button><button class="control-btn" onclick="clearPreview()">Delete</button></div></div></div></main><input type="file" id="file-input" accept=".html,.htm" style="display:none"><div id="paste-modal" class="modal-overlay"><div class="modal"><h3>Paste HTML</h3><textarea id="paste-editor" class="textarea-field" spellcheck="false" placeholder="Paste your HTML here..."></textarea><div style="display:flex;justify-content:flex-end;gap:10px;"><button class="btn" onclick="closePasteModal()">Cancel</button><button class="btn btn-primary" onclick="applyPaste()">Run Code</button></div></div></div><div id="optimizer-modal" class="modal-overlay"><div class="modal"><h3 style="margin-top:0;margin-bottom:12px;">Optimizer</h3><textarea id="optimizer-editor" class="textarea-field" spellcheck="false" placeholder="Paste code to optimize..."></textarea><div style="display:flex;justify-content:flex-end;gap:10px;"><button class="btn" onclick="closeOptimizerModal()">Cancel</button><button class="btn btn-primary" onclick="optimizerAction()">Optimize Now</button><button class="btn btn-primary" onclick="applyOptimizer()">Run Optimized Code</button></div></div></div><div id="save-modal" class="modal-overlay"><div class="modal"><h3>Save to Library</h3><input type="text" id="project-name" class="input-field" placeholder="Name this project..."><div style="display:flex;justify-content:flex-end;gap:10px;"><button class="btn" onclick="closeSaveModal()">Cancel</button><button class="btn btn-primary" onclick="saveProject()">Save</button></div></div></div><script>const iframe=document.getElementById('preview-frame');const pasteEditor=document.getElementById('paste-editor');const optimizerEditor=document.getElementById('optimizer-editor');const favoritesList=document.getElementById('favorites-list');const themeDropdown=document.getElementById('theme-dropdown');const previewWrapper=document.getElementById('preview-wrapper');const fullscreenIcon=document.getElementById('fullscreen-icon');const fileInput=document.getElementById('file-input');const AUTOSAVE_KEY='current_work_v1';let currentCode="";let favorites=JSON.parse(localStorage.getItem('favs_v3'))||[];function optimizerAction(){let code=optimizerEditor.value;if(!code.trim())return;let optimized=code.trim().replace(/<!--[\s\S]*?-->/g,'').replace(/\n\s*\n/g,'\n');if(!optimized.toLowerCase().includes('<html')){optimized=`<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Optimized</title></head><body>${optimized}</body></html>`;}else if(optimized.includes('<head>')&&!optimized.toLowerCase().includes('viewport')){optimized=optimized.replace('<head>','<head><meta name="viewport" content="width=device-width, initial-scale=1.0">');}optimized=optimized.replace(/\n\s*\n/g,'\n');optimizerEditor.value=optimized;const btn=event.target;btn.innerText="Done!";setTimeout(()=>btn.innerText="Optimize Now",1000);}function clearPreview(){currentCode="";iframe.srcdoc="";localStorage.removeItem(AUTOSAVE_KEY);if(navigator.vibrate)navigator.vibrate(5);}function runCode(code){if(!code)return;currentCode=code;iframe.srcdoc=code;localStorage.setItem(AUTOSAVE_KEY,code);}function toggleFullscreen(){const isFull=previewWrapper.classList.toggle('pseudo-fullscreen');fullscreenIcon.innerHTML=isFull?'<path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>':'<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>';}document.addEventListener('keydown',(e)=>{if(e.key==='Escape'&&previewWrapper.classList.contains('pseudo-fullscreen'))toggleFullscreen();});document.getElementById('toggle-sidebar-btn').onclick=()=>{const sb=document.getElementById('sidebar');sb.style.display=(window.getComputedStyle(sb).display==='none')?'flex':'none';};document.getElementById('settings-btn').onclick=(e)=>{e.stopPropagation();themeDropdown.classList.toggle('show');};function setTheme(t){document.body.className=`theme-${t}`;localStorage.setItem('theme',t);themeDropdown.classList.remove('show');}fileInput.onchange=(e)=>{const file=e.target.files[0];if(file){const reader=new FileReader();reader.onload=(ev)=>runCode(ev.target.result);reader.readAsText(file);}};function openPasteModal(){pasteEditor.value=currentCode;document.getElementById('paste-modal').classList.add('active');requestAnimationFrame(()=>pasteEditor.focus());}function closePasteModal(){document.getElementById('paste-modal').classList.remove('active');}function applyPaste(){runCode(pasteEditor.value);closePasteModal();}function openOptimizerModal(){optimizerEditor.value=currentCode;document.getElementById('optimizer-modal').classList.add('active');requestAnimationFrame(()=>optimizerEditor.focus());}function closeOptimizerModal(){document.getElementById('optimizer-modal').classList.remove('active');}function applyOptimizer(){runCode(optimizerEditor.value);closeOptimizerModal();}function renderFavorites(){const fragment=document.createDocumentFragment();favorites.forEach((f,i)=>{const wrapper=document.createElement('div');wrapper.className='fav-wrapper';wrapper.innerHTML=`<div class="delete-action"><svg viewBox="0 0 24 24" style="width:24px;height:24px;"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg></div><div class="fav-item"><div class="fav-name">${f.name}</div></div>`;const item=wrapper.querySelector('.fav-item');let startX=0,currentX=0;item.addEventListener('touchstart',(e)=>{startX=e.touches[0].clientX;item.style.transition='none';},{passive:true});item.addEventListener('touchmove',(e)=>{const x=e.touches[0].clientX;const diff=x-startX;if(diff<0){currentX=diff;if(currentX<-120)currentX=-120+(currentX+120)*0.2;item.style.transform=`translateX(${currentX}px)`;}},{passive:true});item.addEventListener('touchend',()=>{item.style.transition='transform 0.3s cubic-bezier(0.2, 1, 0.2, 1)';if(currentX<-90){deleteFav(i);}else{item.style.transform='translateX(0)';if(currentX>-10)runCode(f.code);}currentX=0;});item.onclick=()=>{if(currentX===0)runCode(f.code);};fragment.appendChild(wrapper);});favoritesList.innerHTML='';favoritesList.appendChild(fragment);}function initSortable(){if(window.Sortable){new Sortable(favoritesList,{animation:150,delay:150,delayOnTouchOnly:true,ghostClass:'sortable-ghost',onEnd:(evt)=>{const item=favorites.splice(evt.oldIndex,1)[0];favorites.splice(evt.newIndex,0,item);localStorage.setItem('favs_v3',JSON.stringify(favorites));}});}else{setTimeout(initSortable,100);}}function openSaveModal(){document.getElementById('save-modal').classList.add('active');}function closeSaveModal(){document.getElementById('save-modal').classList.remove('active');}function saveProject(){const name=document.getElementById('project-name').value.trim();if(name){favorites.unshift({name,code:currentCode});localStorage.setItem('favs_v3',JSON.stringify(favorites));document.getElementById('project-name').value="";renderFavorites();closeSaveModal();}}function deleteFav(i){if(navigator.vibrate)navigator.vibrate(10);favorites.splice(i,1);localStorage.setItem('favs_v3',JSON.stringify(favorites));renderFavorites();}window.addEventListener('click',(e)=>{if(!e.target.closest('.toolbar-group')){themeDropdown.classList.remove('show');}});pasteEditor.addEventListener('input',()=>{localStorage.setItem(AUTOSAVE_KEY,pasteEditor.value);});window.onload=()=>{setTheme(localStorage.getItem('theme')||'gray');renderFavorites();initSortable();const savedWork=localStorage.getItem(AUTOSAVE_KEY);if(savedWork){runCode(savedWork);}};</script></body></html>
